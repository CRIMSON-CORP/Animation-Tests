<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --spring-easing: linear(
          0,
          0.001,
          0.002 0.4%,
          0.009,
          0.021,
          0.037 1.9%,
          0.082,
          0.148,
          0.215,
          0.297 5.9%,
          0.623 9.7%,
          0.756,
          0.879,
          0.978 14.7%,
          1.02,
          1.058,
          1.091,
          1.119,
          1.142,
          1.162,
          1.177,
          1.188 21.2%,
          1.192,
          1.195,
          1.196,
          1.197,
          1.195,
          1.193,
          1.189,
          1.183 25.7%,
          1.17 26.8%,
          1.152,
          1.131 29.5%,
          1.055 34%,
          1.031 35.6%,
          1.012 37%,
          0.994,
          0.98,
          0.97 42.1%,
          0.967,
          0.964 43.9%,
          0.962,
          0.961,
          0.962 47.4%,
          0.964 48.8%,
          0.97 51.2%,
          0.989 57%,
          0.997 59.9%,
          1.003,
          1.007 66.3%,
          1.008 68.9%,
          1.007 71.7%,
          1.001 82.2%,
          0.999 87.5% 100%
        );
        --spring-duration: 1.5s;

        --d-1: path("M 5 11 L 27.042 11.054 M 5.084 20.972 L 27.042 20.992");
        --d-2: path("M 4.958 16.028 L 27 16.082 M 5.042 16 L 27 16.02");
        --d-3: path(
          "M 13.473 23.505 L 19.528 15.568 M 13.557 8.494 L 19.528 15.506"
        );
      }

      body {
        min-height: 100vh;
        background-color: oklab(0.64 -0.06 0.07);
        display: grid;
        place-items: center;
      }

      .wrapper {
        width: 280px;
        height: 150px;
        background-color: white;
        position: relative;
        border-radius: 30px;

        .overlay {
          top: 0;
          right: -26px;
          transform: translateY(-50%);
          border-radius: 30px;
          background-color: oklab(34.031% -0.01157 0.0142);
          position: absolute;
          transition: clip-path cubic-bezier(0.12, 1, 0.4, 1) 750ms,
            transform var(--spring-duration) var(--spring-easing),
            grid-template-columns cubic-bezier(0.19, 1, 0.22, 1) 600ms;
          transition-delay: 300ms;
          box-shadow: 0px 5px 15px oklab(34.031% -0.01157 0.0142/ 0.5);
          overflow: hidden;
          display: grid;
          grid-template-columns: auto 0fr;
          grid-auto-flow: column;
          align-items: center;
          justify-content: space-around;
          width: max-content;

          &:has(label:active) {
            transform: translateY(-50%) scale(0.9);
          }

          label {
            padding: 12px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            background-color: rgb(51, 51, 51);
            transition: transform var(--spring-duration) var(--spring-easing),
              background-color var(--spring-duration) var(--spring-easing);
            position: relative;

            background-color: transparent;
            border: none;
            isolation: isolate;
            box-shadow: 9px 0px 9px oklab(34.031% -0.01157 0.0142);
            z-index: 1;
            input {
              display: none;
            }
            svg {
              display: block;
              path {
                animation: close-icon cubic-bezier(0.34, 0.04, 0, 1) 2s normal
                  both;
              }
            }

            &::before {
              content: "";
              opacity: 0;
              inset: 0;
              position: absolute;
              border-radius: inherit;
              background-color: rgb(32, 32, 32);
              transform: scale(1);
              transition: transform ease-out 200ms, opacity ease-out 200ms;
              z-index: -1;
            }

            &:active {
              transform: scale(0.9);
              &::before {
                transform: scale(0.7);
                opacity: 1;
              }
            }
          }

          .menu {
            flex: none;
            display: flex;
            align-items: center;
            margin-left: auto;
            justify-self: flex-end;
            justify-content: flex-end;
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: relative;

            & > .menu-content {
              margin-right: 13px;
              display: flex;
              gap: 8px;
              justify-content: flex-end;
              & > div {
                border-radius: 50%;
                background-color: oklab(50% -0.01157 0.0142 / 0.5);
                width: 32px;
                height: 32px;
                flex: none;
                transform: scale(0.5);
                opacity: 0;

                transition-property: transform, opacity;
                transition-duration: 1400ms;
                transition-timing-function: var(--spring-easing);
              }
            }
          }

          &.open {
            width: auto;
          }
        }

        .overlay:has(:checked) {
          grid-template-columns: auto 1fr;

          label {
            svg {
              path {
                animation: open-icon cubic-bezier(0.34, 0.04, 0, 1) 2s normal
                  both;
              }
            }
          }

          .menu .menu-content div {
            opacity: 1;
            transform: scale(1);
            transition-delay: 325ms;

            &:nth-child(1) {
              transition-delay: 475ms;
            }
            &:nth-child(2) {
              transition-delay: 450ms;
            }
            &:nth-child(3) {
              transition-delay: 425ms;
            }
            &:nth-child(4) {
              transition-delay: 400ms;
            }
            &:nth-child(5) {
              transition-delay: 375ms;
            }
            &:nth-child(6) {
              transition-delay: 350ms;
            }
          }
        }
      }

      @keyframes open-icon {
        0% {
          d: var(--d-1);
          animation-timing-function: cubic-bezier(0.34, 0.04, 0, 1);
        }
        30% {
          d: var(--d-2);
          animation-timing-function: linear(
            0,
            0.001,
            0.002 0.4%,
            0.009,
            0.021,
            0.037 1.9%,
            0.082,
            0.148,
            0.215,
            0.297 5.9%,
            0.623 9.7%,
            0.756,
            0.879,
            0.978 14.7%,
            1.02,
            1.058,
            1.091,
            1.119,
            1.142,
            1.162,
            1.177,
            1.188 21.2%,
            1.192,
            1.195,
            1.196,
            1.197,
            1.195,
            1.193,
            1.189,
            1.183 25.7%,
            1.17 26.8%,
            1.152,
            1.131 29.5%,
            1.055 34%,
            1.031 35.6%,
            1.012 37%,
            0.994,
            0.98,
            0.97 42.1%,
            0.967,
            0.964 43.9%,
            0.962,
            0.961,
            0.962 47.4%,
            0.964 48.8%,
            0.97 51.2%,
            0.989 57%,
            0.997 59.9%,
            1.003,
            1.007 66.3%,
            1.008 68.9%,
            1.007 71.7%,
            1.001 82.2%,
            0.999 87.5% 100%
          );
        }
        100% {
          d: var(--d-3);
        }
      }
      @keyframes close-icon {
        0% {
          d: var(--d-3);
          animation-timing-function: cubic-bezier(0.34, 0.04, 0, 1);
        }
        30% {
          d: var(--d-2);
          animation-timing-function: linear(
            0,
            0.001,
            0.002 0.4%,
            0.009,
            0.021,
            0.037 1.9%,
            0.082,
            0.148,
            0.215,
            0.297 5.9%,
            0.623 9.7%,
            0.756,
            0.879,
            0.978 14.7%,
            1.02,
            1.058,
            1.091,
            1.119,
            1.142,
            1.162,
            1.177,
            1.188 21.2%,
            1.192,
            1.195,
            1.196,
            1.197,
            1.195,
            1.193,
            1.189,
            1.183 25.7%,
            1.17 26.8%,
            1.152,
            1.131 29.5%,
            1.055 34%,
            1.031 35.6%,
            1.012 37%,
            0.994,
            0.98,
            0.97 42.1%,
            0.967,
            0.964 43.9%,
            0.962,
            0.961,
            0.962 47.4%,
            0.964 48.8%,
            0.97 51.2%,
            0.989 57%,
            0.997 59.9%,
            1.003,
            1.007 66.3%,
            1.008 68.9%,
            1.007 71.7%,
            1.001 82.2%,
            0.999 87.5% 100%
          );
        }
        100% {
          d: var(--d-1);
        }
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <div class="overlay">
        <label for="menu">
          <input type="checkbox" name="menu" id="menu" />
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 32 32"
            width="32px"
            height="32px"
            xmlns:bx="https://boxy-svg.com"
          >
            <path
              id="path"
              style="
                fill: none;
                stroke: rgb(255, 255, 255);
                stroke-width: 3px;
                stroke-linecap: round;
                stroke-linejoin: round;
              "
              d="M 4.958 11.028 L 27 11.082 M 5.042 21 L 27 21.02"
            ></path>
          </svg>
        </label>
        <div class="menu">
          <div class="menu-content">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
